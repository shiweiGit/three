<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			.container{
				position: relative; 
				overflow:hidden;
			}
			.container .box{
				position:absolute;
			}
			.container .box img{
				display:inline-block;
				height: inherit;
			}
			.footer{
				position: absolute;
				bottom: 10px;
				width: inherit;
				text-align: center;
			}
			.footer li{
				display:inline-block;
				width:20px;
				height:20px;
				margin: 0px 3px;
				border-radius:10px;
				background:#3E3E3E;
				color:#fff;
				cursor:pointer;
			}
			.footer .selected{
				background:#fff;
				color:#000;
			}
			.container .btn{
				position:absolute;
				display:none;
				width:38px;
				height:67px;
				border-radius: 5px;
				background:#ccc;
				line-height: 67px;
				text-align: center;
				cursor:pointer;
			}
			.container .btn:hover{
				box-shadow:0px 0px 5px #fff;
			}
			.container .btn a{
				color:#000;
				font-size: xx-large;
			}
		</style>
		<script src="picAutoScroll.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div id="main"></div>
		<script type="text/javascript">
		var main = document.getElementById('main'),
			picArr = ['https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3224198069,2151251196&fm=11&gp=0.jpg',
			'https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=2902401416,3799036658&fm=11&gp=0.jpg',
			'https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1275857391,1245327962&fm=11&gp=0.jpg']
			var scroll = new picAutoScroll({addto:main,picArr:picArr,width:500,height:400,time:2000});
		
		    
/**
 * args参数
 * 	addto:加载的节点
 * 	picArr:图片数组
 * 	width:宽,默认500
 * 	height:高，默认500
 *  time:切换时长，默认4秒
 * */
function picAutoScroll(args) {
	if(!args.addto)return;
	if(!args.time) args.time=4000;
	if(!args.width) args.width=500;
	if(!args.height) args.height=500;
	
	var piclen = picArr.length, //图片的张数
		   totalWidth = piclen * args.width; //放置图片的盒子的总宽度
	//最外层的container
	var container = document.createElement('div');
	container.className = 'container';
	container.style.width = args.width+'px';
	container.style.height = args.height+'px';
	
	//放图片的box
	var box = document.createElement('div');
	box.className = 'box';
	box.style.width = totalWidth+'px';
	box.style.height = args.height+'px';
	box.style.left ='0px';
	
	container.appendChild(box);
		
	var  imgHtml = "",//图片img代码
		liHtml = "";//li代码
	
	for(var i = 0; i < piclen; i++) {
		imgHtml += "<img src=" + picArr[i] + "; width=" + args.width + ";height=" + args.height + ";>";
		if(i==0){
			liHtml += "<li class='selected'>" + parseInt(i + 1) + "</li>";			
		}else{
			liHtml += "<li>" + parseInt(i + 1) + "</li>";
		}
	}
	box.innerHTML = imgHtml;
	
	
	//左右按钮
	var btnLeft = document.createElement('div');
	btnLeft.className  = 'btn';
	btnLeft.style.left= "10px";
	btnLeft.style.top= args.height/2-67+'px';
	btnLeft.innerHTML = '<a><</a>';
	container.appendChild(btnLeft);
	
	var btnRight = document.createElement('div');
	btnRight.className  = 'btn';
	btnRight.style.right= "10px";
	btnRight.style.top= args.height/2-67+'px';
	btnRight.innerHTML = '<a>></a>';
	container.appendChild(btnRight);
	
	args.addto.onmouseover = function(){
		btnLeft.style.display = 'block';
		btnRight.style.display = 'block';
	}
	args.addto.onmouseleave = function(){
		btnLeft.style.display = 'none';
		btnRight.style.display = 'none';
	}
	
	//底部
	var footer =  document.createElement('div');
	footer.className = 'footer';
	footer.innerHTML = liHtml;
	container.appendChild(footer);
	
	args.addto.appendChild(container);
	args.addto.style.padding = "5px";
	
var savenum=0,num = 0,Left;
//自动播放
var autoFn = function(){
	num++;
	if(num>=piclen){
		num = 0;
		Left=0;
		footer.childNodes[num].className = 'selected';
	}else{
		Left = parseInt(box.style.left) - parseInt(args.width);
	}
	if(num!=0){		
		footer.childNodes[num-1].className = '';
	}else{
		footer.childNodes[piclen-1].className = '';
	}
	box.style.left = Left+'px';
	footer.childNodes[num].className = 'selected';
}
	var auto ;
		auto = setInterval(autoFn, args.time);
	//点击切换
	//右
	btnRight.onmouseenter = function(){
		clearInterval(auto);
	}
	btnRight.onclick = function(){
		num++;
		footer.childNodes[num-1].className = '';
		if(num>=piclen){
			num = 0;
			Left=0;
		}else{
			Left = parseInt(box.style.left) - parseInt(args.width);
		}
		footer.childNodes[num].className = 'selected';
		box.style.left = Left+'px';
	}
	btnRight.onmouseleave = function(){
		auto = setInterval(autoFn, args.time);
	}
	//左
	btnLeft.onmouseenter = function(){
		clearInterval(auto);
	}	
	btnLeft.onclick = function(){
		num--;
		footer.childNodes[num+1].className = '';
		if(num<0){
			num = piclen-1;
			Left=-totalWidth+args.width;
		}else{
			Left = parseInt(box.style.left) + parseInt(args.width);
		}
		footer.childNodes[num].className = 'selected';
		box.style.left = Left+'px';
	}
	btnLeft.onmouseleave = function(){
		auto = setInterval(autoFn, args.time);
	}
	//点击底部数字选择
	footer.onmouseover = function(e){
		if(e.target.tagName=='LI'){
			clearInterval(auto);
			e.target.onclick = function(){
				console.log(num);
				footer.childNodes[num].className = '';
				e.target.className = 'selected';
				Left = -(parseInt(e.target.innerHTML)-1)*args.width;
				num = parseInt(e.target.innerHTML)-1;
				box.style.left = Left+'px';	
			}
			e.target.onmouseleave = function(){
				auto = setInterval(autoFn, args.time);
			}
		}
	}
}
		    
		</script>
	</body>
</html>
